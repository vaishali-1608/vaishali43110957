SHOW DATABASES;
CREATE DATABASE sathyabama;
USE sathyabama;

CREATE TABLE CSE(regno INT PRIMARY KEY,name VARCHAR(20),dept VARCHAR(10),marks INT);
CREATE TABLE ECE(regno INT PRIMARY KEY,name VARCHAR(20),dept VARCHAR(10),marks INT);

INSERT INTO CSE VALUES(001,'vaishali','CSE', NULL);
INSERT INTO CSE VALUES(002,'sangeetha','CSE', NULL);
INSERT INTO CSE VALUES(003,'swetha','CSE', NULL);

INSERT INTO ECE VALUES(001,'nikitha','ECE', NULL);
INSERT INTO ECE VALUES(002,'zahra','ECE', NULL);
INSERT INTO ECE VALUES(003,'priya','ECE', NULL);

SELECT * FROM CSE;
SELECT * FROM ECE;

UPDATE CSE SET marks = 99 WHERE dept = 'CSE';
DELETE FROM CSE WHERE regno = 2;

CREATE TABLE STUDENT_DEPT(dept VARCHAR(10) PRIMARY KEY);
INSERT INTO STUDENT_DEPT VALUES('CSE');
INSERT INTO STUDENT_DEPT VALUES('ECE');

ALTER TABLE CSE
ADD CONSTRAINT fk_dept
FOREIGN KEY (dept) REFERENCES STUDENT_DEPT(dept)
ON DELETE CASCADE
ON UPDATE CASCADE;

TRUNCATE TABLE ECE;
DROP TABLE ECE;

START TRANSACTION;
INSERT INTO CSE VALUES (004,'lavanya','CSE',95);
SAVEPOINT sp1;
INSERT INTO CSE VALUES (005,'harini','CSE',90);
ROLLBACK TO sp1; 
COMMIT;
SELECT * FROM CSE WHERE name LIKE 'v%'; 
SELECT regno AS "Registration Number", name AS "Student Name", marks AS "Marks Obtained" FROM CSE;