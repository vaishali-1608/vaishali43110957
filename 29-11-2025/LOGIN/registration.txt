<%@ page import ="java.sql.*" %>
<%
String user = request.getParameter("uname");    
String pwd = request.getParameter("pass");
String fname = request.getParameter("fname");
String lname = request.getParameter("lname");
String email = request.getParameter("email");

try {
    Class.forName("com.mysql.cj.jdbc.Driver");
    Connection con = DriverManager.getConnection(
        "jdbc:mysql://localhost:3306/test?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC",
        "root",
        "root"
    );

    Statement st = con.createStatement();
    int i = st.executeUpdate(
        "INSERT INTO members(first_name, last_name, email, uname, pass, regdate) " +
        "VALUES ('" + fname + "','" + lname + "','" + email + "','" + user + "','" + pwd + "', CURDATE())"
    );

    if (i > 0) {
        response.sendRedirect("welcome.jsp");
    } else {
        response.sendRedirect("index.jsp");
    }

    st.close();
    con.close();
} catch(Exception e) {
    out.println("Error: " + e.getMessage());
}
%>